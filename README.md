**Сервис генерации числового мультипликатора**
Этот репозиторий содержит исходный код HTTP-сервиса на Go, который генерирует случайные числовые мультипликаторы для клиента. Основная цель сервиса — обеспечить, чтобы итоговый RTP (Return to Player) на стороне клиента стремился к заданному значению rtp при большом количестве запросов.

**Описание алгоритма**
Ключевая задача сервиса — не просто сгенерировать случайное число, а сгенерировать его с определенной вероятностью. Чтобы RTP клиента стремился к заданному rtp, необходимо, чтобы вероятность "успеха" (то есть, multiplier > x) была равна этому rtp для каждого запроса.

Для решения этой задачи был выбран алгоритм - основанный на испытании Бернулли,
т.е последовательность независимых испытаний, в каждом из которых возможны лишь два исхода — "успех" и "неудача", при этом успех в каждом испытании происходит с одной и той же вероятностью p∈(0,1),
а неудача — с вероятностью q=1−p.

**Логика решения:**

- Сервис на Go (генератор): Его единственная задача — принимать запросы и возвращать одно число (1.0 или 10000.0). Он слепо подчиняется вероятностному правилу: "верни 10000.0 с вероятностью rtp". Он не ведёт никакой статистики и не знает, сколько раз он что-то вернул. Для него каждый запрос — это отдельное, независимое событие.

- Клиент (аналитик): Именно клиент делает всю работу по сбору данных и расчётам. Он отправляет N запросов, получает ответы и сам ведёт учёт. Он считает количество "успехов" (получил 10000.0) и общее количество запросов. После этого он вычисляет итоговый RTP.

  1.0 и 10000.0 как условности ""успеха" и "неудачи":

  10000.0 — это "успех", потому что это число гарантированно больше любого числа x из последовательности клиента (x ∈ [1.0, 10000.0]). Когда клиент получит 10000.0, он всегда оставит своё число x неизменным.

  1.0 — это "неудача", потому что это число гарантированно меньше или равно любому числу x из последовательности клиента. Когда клиент получит 1.0, он всегда заменит своё число x на 0.

При запуске сервис принимает желаемое значение rtp (например, 0.65) в качестве параметра.

При каждом HTTP-запросе /get сервис выполняет следующие действия:

Генерирует случайное число с плавающей запятой U в диапазоне от [0.0, 1.0).

Сравнивает U с заданным rtp.

Если U < rtp (это "успех"), сервис возвращает большое число (10000.0). Это число гарантированно будет больше любого значения x в последовательности клиента.

Если U >= rtp (это "неудача"), сервис возвращает маленькое число (1.0). Это число гарантированно будет меньше или равно любому x.

Благодаря этому подходу, на большой дистанции (10,000+ запросов) количество "успешных" ответов будет примерно равно rtp процентам от общего числа запросов. Это и обеспечивает необходимый RTP на стороне клиента.

**Как запустить программу:**

1. Запуск Go сервиса

В терминале необходимо прописать следующую команду с указанием параметра rtp:

go run ./cmd/main.go -rtp=0.65

Сервис запустится по адресу http://localhost:64333 и будет готов к приему запросов.

2. Запуск Python клиента для тестирования

Для проверки работы сервиса можно использовать клиентский скрипт на Python.
Если Python не установлен, то надо выполнить команду:

python3 -m pip install requests

Затем в новом окне терминала (пока Go-сервис работает) запустить скрипт:

python3 ./cmd/test_client.py

Скрипт отправит 11,000 запросов и выведет в терминал рассчитанный RTP, который должен быть очень близок к значению, заданному при запуске сервиса.

**Пример при запуске команды в терминале:**

go run ./cmd/main.go -rtp=0.75

в терминале запуска python скрипта должны быть примерно следующие значения:
--- Результаты теста ---
Количество успешных запросов: 8186
Количество 'успешных' мультипликаторов: 6154
Рассчитанный RTP (отношение 'успехов' к общему числу запросов): 0.7518
Тест занял: 5.97 секунд
