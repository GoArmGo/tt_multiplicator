Сервис генерации числового мультипликатора
Этот репозиторий содержит исходный код HTTP-сервиса на Go, который генерирует случайные числовые мультипликаторы для клиента. Основная цель сервиса — обеспечить, чтобы итоговый RTP (Return to Player) на стороне клиента стремился к заданному значению при большом количестве запросов.

Описание алгоритма
Ключевая задача сервиса — не просто сгенерировать случайное число, а сгенерировать его с определенной вероятностью, обеспечивая реалистичную и разнообразную систему выплат. Чтобы RTP клиента стремился к заданному значению, необходимо, чтобы среднее значение выплат на большой дистанции совпадало с этим RTP.

Для решения этой задачи был выбран алгоритм, основанный на использовании таблицы выплат. Это позволяет генерировать не только выигрыш/проигрыш, но и малые, средние и крупные выигрыши с разными вероятностями, что делает игру более интересной для пользователя.

Логика решения:

Сервис на Go (генератор): Сервис принимает запросы и возвращает случайный мультипликатор. Он использует внутреннюю таблицу выплат, где каждому множителю (например, 2.0, 5.0, 100.0) соответствует своя вероятность. Сумма произведений каждого мультипликатора на его вероятность в точности равна заданному RTP. Сервис не ведет никакой статистики.

Клиент (аналитик): отправляет N запросов, получает ответы и сам ведет учет. Он суммирует все полученные мультипликаторы, а затем вычисляет итоговый RTP по формуле: RTP = (Общая сумма выигрышей) / (Количество запросов).

Как запустить программу:

Запуск Go сервиса

В терминале необходимо прописать следующую команду с указанием параметра rtp:

go run ./cmd/main.go -rtp=0.8

Сервис запустится по адресу http://localhost:64333 и будет готов к приему запросов.

Запуск Python клиента для тестирования

Для проверки работы сервиса используется клиентский скрипт на Python.
Если Python не установлен, выполните команду:

python3 -m pip install requests

Затем в новом окне терминала (пока Go-сервис работает) запустите скрипт, указав желаемое количество запросов:

python3 ./cmd/inspector.py 10000

Скрипт отправит 10,000 запросов и выведет в терминал рассчитанный RTP, который должен быть очень близок к значению, заданному при запуске сервиса.

Пример при запуске команды в терминале:

go run ./cmd/main.go -rtp=0.8

В терминале запуска Python скрипта должны быть примерно следующие значения:
--- Результаты теста ---
Количество запросов: 10000
Количество выигрышных спинов: 1025
Общая сумма выигрышей: 7944.00
Рассчитанный RTP: 0.7944
